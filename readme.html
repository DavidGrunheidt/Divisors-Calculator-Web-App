<!DOCTYPE html><html><head><meta charset="utf-8"><title>Untitled Document.md</title><style></style></head><body id="preview">
    <h3 class="code-line" data-line-start=0 data-line-end=1 ><a id="Instalao_e_execuo_0"></a>Instalação e execução</h3>
    <p class="has-line-data" data-line-start="2" data-line-end="4">Este projeto requer <a href="https://nodejs.org/">Node.js</a> para ser executado.<br>
    Para instalar, basta executar no terminal:</p>
    <pre><code class="has-line-data" data-line-start="6" data-line-end="10" class="language-sh">sudo apt update
    sudo apt install nodejs
    sudo apt install npm
    </code></pre>
    <p class="has-line-data" data-line-start="10" data-line-end="11">Verifique se a instalação ocorreu com sucesso checando a versão do nodejs e do npm:</p>
    <pre><code class="has-line-data" data-line-start="12" data-line-end="15" class="language-sh">nodejs -v
    npm -v
    </code></pre>
    <p class="has-line-data" data-line-start="15" data-line-end="17">Navegue até o diretorio raiz do projeto.<br>
    Instale as dependencias e inicie o projeto:</p>
    <pre><code class="has-line-data" data-line-start="18" data-line-end="21" class="language-sh">sudo npm install
    sudo npm run dev
    </code></pre>
    <p class="has-line-data" data-line-start="21" data-line-end="22">Verifique o funcionamento da aplicação navegando para este endereço:</p>
    <pre><code class="has-line-data" data-line-start="23" data-line-end="25" class="language-sh">http://localhost:<span class="hljs-number">3000</span>/
    </code></pre>
    <h3 class="code-line" data-line-start=26 data-line-end=27 ><a id="Tech_26"></a>Tech</h3>
    <p class="has-line-data" data-line-start="27" data-line-end="28">Este projeto utiliza diversas tecnologias e bibliotecas open source:</p>
    <ul>
    <li class="has-line-data" data-line-start="29" data-line-end="30"><a href="http://nodejs.org">Node.js</a> - Interpretador de JavaScript assíncrono com código aberto orientado a eventos.</li>
    <li class="has-line-data" data-line-start="30" data-line-end="31"><a href="https://expressjs.com">Express</a> - Framework back-end para criação de rotas no servidor.</li>
    <li class="has-line-data" data-line-start="31" data-line-end="32"><a href="https://reactjs.org/">React</a> - Uma biblioteca JavaScript para criar interfaces de usuário.</li>
    <li class="has-line-data" data-line-start="32" data-line-end="33"><a href="https://www.mongodb.com/">MongoDB</a> - Software de banco de dados orientado a documentos livre (NoSQL)</li>
    <li class="has-line-data" data-line-start="33" data-line-end="34"><a href="http://mongodb.github.io/node-mongodb-native/3.4/quick-start/quick-start/">MongoDB NodeJS Driver</a> - Driver que prove interações com o Mongo para o NodeJS.</li>
    <li class="has-line-data" data-line-start="34" data-line-end="35"><a href="https://material-ui.com/">Material UI</a> - Framework com componentes react para um desenvolvimento facil e rapido.</li>
    <li class="has-line-data" data-line-start="35" data-line-end="36"><a href="https://www.npmjs.com/package/concurrently">Concurrently</a> - Roda multiplos comandos concorrentemente.</li>
    <li class="has-line-data" data-line-start="36" data-line-end="37"><a href="https://nodemon.io/">Nodemon</a> - Monitora mudanças no projeto para recarregar o server ou o client automaticamente.</li>
    <li class="has-line-data" data-line-start="37" data-line-end="39"><a href="https://github.com/facebook/create-react-app">Create React App</a> - Ferramenta do facebook que cria todo o codigo base para o projeto React funcionar.</li>
    </ul>
    <h3 class="code-line" data-line-start=39 data-line-end=40 ><a id="Implementao_39"></a>Implementação:</h3>
    <p class="has-line-data" data-line-start="41" data-line-end="42">Ao carregar a página inicial da aplicação <strong><em>“localhost:3000”</em></strong>, mostramos o que foi pedido no desafio, porém, o botão que envia o número para o backend está desabilitado, pois o input atual do textLabel não é um número inteiro.</p>
    <p class="has-line-data" data-line-start="43" data-line-end="44">Ao digitar algo no textLabel, verificamos se aquela string é um inteiro valido, tentando dar match daquela string com um regex. Também verificamos se <strong><em>o número é maior que 0 e menor que 10^8</em></strong> (para não sobrecarregar o back end).</p>
    <p class="has-line-data" data-line-start="45" data-line-end="46">Caso não for um inteiro valido, ou estiver fora do intervalo citado acima, desabilitamos o botão de enviar. Para o caso de estar fora do intervalo citado, também mostramos uma mensagem de erro, para que o usuario saiba qual intervalo disponivel para calculo.</p>
    <p class="has-line-data" data-line-start="47" data-line-end="48">Se for um inteiro valido, habilitamos o botão para calcular os divisores. Quando o usuario clica no botão, fazemos uma requisição para <strong><em>/api/divisors</em></strong> passando o parametro <strong><em>number={numero no textLabel}</em></strong>. Enquanto esperamos a resposta, mostramos um spinner para o usuario, para que ele saiba que algo está acontecendo.</p>
    <p class="has-line-data" data-line-start="49" data-line-end="50"><strong><em>No backend</em></strong>, recebemos o request em <strong><em>/api/divisors</em></strong>. Por segurança, verificamos também se o número está no intervalo definido anteriormente, retornando status=404 caso não. Caso esteja no intervalo, <strong><em>verificamos se o cliente está conectado com nosso banco de dados no mongo</em></strong> (atualmente a função sempre retorna true pois não tive tempo de estudar o driver deles para implementar algo que verifique o cliente).</p>
    <p class="has-line-data" data-line-start="51" data-line-end="52">Se o cliente mongo estiver conectado, fazemos uma <strong><em>query na collection “numbers_divisors”</em></strong> (os registros desta collection tem o padrão {reqNumber: Int, divisors: Array}) buscando algum registro que possua o atributo “reqNumber” igual ao número que foi solicitado. <strong><em>Caso algum registro seja encontrado</em></strong>, retornamos como resposta a informação dos divisores contida naquele registro. <strong><em>Se não encontramos nenhum registro</em></strong>, significa que os divisores daquele número ainda não foram calculados, logo, calculamos os divisores e inserimos na collection esta informação, retornando-a também como resposta ao request.</p>
    <p class="has-line-data" data-line-start="53" data-line-end="54"><strong><em>Caso o cliente mongo não estiver conectado</em></strong>, realizamos o calculo dos divisores e respondemos ao request sem realizar a inserção destes na collection.</p>
    <p class="has-line-data" data-line-start="55" data-line-end="56">De volta ao <strong><em>front-end</em></strong>, ao recebermos a resposta, guardamos ela dentro do estado do componente App, no array de resultados “results” (acessivel em this.state.results). Este array de resultados é util, pois podemos <strong><em>salvar os resultados obtidos anteriormente</em></strong>, renderizando todos estes mais o novo resultado através de um processo de mapping.</p>
    <p class="has-line-data" data-line-start="57" data-line-end="58">É importante citar que também <strong><em>verificamos se o número no textLabel já foi calculado anteriormente</em></strong>, desabilitando o botão de calcular caso sim.</p>
    <p class="has-line-data" data-line-start="59" data-line-end="60">Também é importante citar que o <strong><em>banco de dados está localizado num server na amazon</em></strong> (opção disponibilizada gratis pelo pessoal do mongo, e eu liberei todos os ips para fazerem requisições a ele, para que o pessoal que vai avaliar o desafio para o qual este projeto foi feito consiga testar também)</p>
    <p class="has-line-data" data-line-start="61" data-line-end="62">Caso por algum problema, a <strong><em>conexão não esteja sendo feita</em></strong>, alterar a <strong><em>linha 29 do arquivo mongodb.js</em></strong> para <strong><em>return false</em></strong>.</p>
    
    </body></html>